(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(57)},33:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a,o=n(0),i=n.n(o),c=n(17),l=n.n(c),r=n(8),u=n(4),s=n(19),m=n(22),d=n(20),f=n(23),b=n(3),p=function(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},g=(n(33),function(e){return console.log("allocationInfo: ",e),i.a.createElement("div",{className:"AllocationInfo"},"Next Meeting:",i.a.createElement("div",null,p(e.from)," - ",p(e.to)),i.a.createElement("div",null,e.by),i.a.createElement("div",null,e.title))}),v=(n(35),function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"AllocationInfoBig"},"Current Meeting:",i.a.createElement("div",null,p(e.from)," - ",p(e.to)),i.a.createElement("div",null,e.by),i.a.createElement("div",null,e.title),e.attendees?i.a.createElement("div",null,"Attendees: ",e.attendees):null,e.agenda?i.a.createElement("div",null,"Agenda: ",e.agenda):null))});!function(e){e.occupied="occupied",e.free="free",e.awaiting="awaiting"}(a||(a={}));var E,h=function e(t){Object(u.a)(this,e),this.name=t,this.capacity=void 0,this.location=void 0,this.equipment=void 0},y=(n(37),function(e){var t,n,o;console.log("Allocation menu:",e.id),e.currentAllocation?(e.roomStatus===a.awaiting&&(n=i.a.createElement("button",{className:"btn btn_flat",onClick:function(){return e.onConfirmMeetingClick(e.currentAllocation.id)}},i.a.createElement("svg",{className:"icon"},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-calendar-check-o"})),i.a.createElement("span",null,"Confirm"))),t=i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn_flat",onClick:function(){return e.onExtendMeetingClick(e.currentAllocation.id,6e4)}},i.a.createElement("svg",{className:"icon"},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-calendar-plus-o"})),i.a.createElement("span",null,"Extend")),i.a.createElement("button",{className:"btn btn_flat",onClick:function(){return e.onFinishEarlyClick(e.currentAllocation.id)}},i.a.createElement("svg",{className:"icon"},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-calendar-times-o"})),i.a.createElement("span",null,"Finish")),n)):(e.roomStatus===a.awaiting&&(o=i.a.createElement("button",{className:"btn btn_flat",onClick:function(){return e.onConfirmMeetingClick(e.nextAllocation.id)}},i.a.createElement("svg",{className:"icon"},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-calendar-check-o"})),i.a.createElement("span",null,"Confirm"))),t=i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn_flat",onClick:function(){return e.onAddMeetingClick()}},i.a.createElement("svg",{className:"icon"},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-calendar-o"})),i.a.createElement("span",null,"Book now")),o));return i.a.createElement("div",{className:"AllocationMenu ".concat(e.roomStatus)},t)}),x=(n(39),function(e){var t=["RoomStatusBorder"];return t.push(e.roomStatus),i.a.createElement("div",{className:t.join(" ")},e.children)}),k=(n(41),function(e){return i.a.createElement("div",{className:"EquipmentBar"},e.equipment.map(function(t){return function(t){return i.a.createElement("button",{key:t.type,className:"btn btn_".concat(t.status.toLowerCase()),onClick:function(){return e.onChangeStatusClick(t)}},i.a.createElement("svg",{className:"icon icon_".concat(t.status.toLowerCase()," icon-").concat(t.type.toLowerCase())},i.a.createElement("use",{xlinkHref:"symbol-defs.svg#icon-".concat(t.type.toLowerCase())})))}(t)}))}),w=(n(43),function(e){return i.a.createElement("div",{className:"StatusBar"},i.a.createElement("div",null,e.room.name),i.a.createElement(k,{equipment:e.equipment,onChangeStatusClick:e.onChangeStatusClick}))}),C=(n(45),function(e){return i.a.createElement("div",{className:"TimeView"},p(e.time))}),S=(n(47),function(e){var t,n;return console.log("roomView: ",e),e.currentAllocation&&(t=i.a.createElement(v,e.currentAllocation)),e.nextAllocation&&(n=i.a.createElement(g,e.nextAllocation)),i.a.createElement("div",{className:"RoomView"},i.a.createElement(w,Object.assign({time:e.time},e)),i.a.createElement(x,{roomStatus:e.roomStatus},i.a.createElement(C,{time:e.time}),i.a.createElement("div",{className:"Separator"}),i.a.createElement("div",{className:"RightSection"},t,n,i.a.createElement(y,{currentAllocation:e.currentAllocation,nextAllocation:e.nextAllocation,roomStatus:e.roomStatus,onFinishEarlyClick:e.onFinishEarlyClick,onExtendMeetingClick:e.onExtendMeetingClick,onConfirmMeetingClick:e.onConfirmMeetingClick,onAddMeetingClick:e.onAddMeetingClick}))))}),A=function e(t,n,a,o){Object(u.a)(this,e),this.title=t,this.roomName=n,this.from=a,this.to=o,this.id=void 0,this.confirmed=!1,this.by=void 0,this.attendees=void 0,this.agenda=void 0,this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},j=n(1),O=Object(j.c)({slice:"allocation",initialState:{entity:{},ids:[]},reducers:{addAllocation:function(e,t){e.entity[t.payload.id]=t.payload,e.ids.push(t.payload.id)},finishEarly:function(e,t){e.entity[t.payload].to=Date.now()-6e4},extendMeeting:function(e,t){e.entity[t.payload.id].to+=t.payload.amount,e.entity[t.payload.id].confirmed=!0},confirmMeeting:function(e,t){e.entity[t.payload.id].confirmed=!0,e.entity[t.payload.id].from=Date.now()-6e4}}}),N=n(9);!function(e){e.Available="Available",e.NotAvailable="NotAvailable",e.Broken="Broken"}(E||(E={}));var M,q=Object(j.c)({slice:"equipment",initialState:[],reducers:{addEquipment:function(e,t){return[].concat(Object(N.a)(e),[t.payload])},setStatus:function(e,t){return e.filter(function(e){return e.roomName===t.payload.roomName&&e.type===t.payload.type})[0].status=t.payload.status,e},changeStatus:function(e,t){var n=e.filter(function(e){return e.roomName===t.payload.roomName&&e.type===t.payload.type})[0],a=E.Available;switch(n.status){case E.Available:a=E.Broken;break;case E.Broken:a=E.NotAvailable;break;case E.NotAvailable:a=E.Available}return n.status=a,e}}}),R=Object(j.b)(["ui.time"]),B=Object(j.b)(["ui.selectedRoomId"]),I=Object(j.b)([B,"room"],function(e,t){return t.filter(function(t){return t.name===e})[0]}),D=Object(j.b)([B,"allocation"],function(e,t){return Object.values(t.entity).filter(function(t){return t.roomName===e})}),F=Object(j.b)([R,D],function(e,t){return t.filter(function(t){return t.from<=e&&t.to>=e})}),_=Object(j.b)([R,D],function(e,t){return t.filter(function(t){return t.from>=e})}),H=Object(j.b)([_],function(e){return e.sort(function(e,t){return e.from-t.from})}),T=Object(j.b)([(M=1,Object(j.b)([H],function(e){return e.slice(0,M)}))],function(e){return e[0]}),L=Object(j.b)([F],function(e){return e[0]}),W=Object(j.b)([F],function(e){return e.length>0}),V=Object(j.b)([B,"equipment"],function(e,t){return t.filter(function(t){return t.roomName===e})}),J=Object(r.b)(function(e,t){console.log("mapState: ",e);var n,o=R(e),i=I(e),c=V(e),l=(n=12e4,Object(j.b)([L,T,R],function(e,t,o){return e?e.confirmed?a.occupied:a.awaiting:t&&t.from-o<n?t.confirmed?a.occupied:a.awaiting:a.free}))(e);return{currentAllocation:F(e)[0],equipment:c,nextAllocation:T(e),room:i,roomStatus:l,time:o}},function(e){return{onAddMeetingClick:function(t){e(O.actions.addAllocation(Object(b.a)({},new A("Ad hoc meeting","Supernova",Date.now()-6e4,Date.now()+5e4),{confirmed:!0})))},onChangeStatusClick:function(t){e(q.actions.changeStatus(t)),console.log("TODO change status. Ids need to be added to equipment")},onConfirmMeetingClick:function(t){e(O.actions.confirmMeeting({id:t}))},onExtendMeetingClick:function(t,n){e(O.actions.extendMeeting({id:t,amount:n}))},onFinishEarlyClick:function(t){e(O.actions.finishEarly(t))}}})(S),P=(n(53),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log("hello world","test"),i.a.createElement("div",{className:"App"},i.a.createElement(J,null))}}]),t}(o.Component));n(55),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U,$=n(2),z=Object(j.c)({slice:"room",initialState:[],reducers:{addRoom:function(e,t){return[].concat(Object(N.a)(e),[t.payload])}}}),G=Object(j.c)({slice:"ui",initialState:{selectedRoomId:"",time:Date.now()},reducers:{setSelectedRoomId:function(e,t){return e.selectedRoomId=t.payload,e},setTime:function(e,t){return e.time=t.payload,e}}}),K=Object($.combineReducers)({ui:G.reducer,room:z.reducer,allocation:O.reducer,equipment:q.reducer}),Q=Object(j.a)({reducer:K}),X=function e(t,n,a){Object(u.a)(this,e),this.roomName=t,this.type=n,this.status=a};!function(e){e.Projector="display",e.WhiteBoard="users",e.Skype="skype"}(U||(U={}));(function(){console.log("hello world"),Q.subscribe(function(){console.log(Q.getState())}),Q.dispatch(z.actions.addRoom(Object(b.a)({},new h("Supernova")))),Q.dispatch(z.actions.addRoom(Object(b.a)({},new h("Room 2")))),Q.dispatch(G.actions.setSelectedRoomId("Supernova")),Q.dispatch(O.actions.addAllocation(Object(b.a)({},new A("Test allocation 2a","Room 2",Date.now()-12e5,Date.now()-12e5)))),Q.dispatch(q.actions.addEquipment(Object(b.a)({},new X("Supernova",U.Projector,E.Available)))),Q.dispatch(q.actions.addEquipment(Object(b.a)({},new X("Supernova",U.Skype,E.Available)))),Q.dispatch(q.actions.addEquipment(Object(b.a)({},new X("Supernova",U.WhiteBoard,E.Available))));var e=B(Q.getState()),t=D(Q.getState()),n=V(Q.getState()),a=W(Q.getState()),o=F(Q.getState())[0],i=T(Q.getState());console.log("Name: ",e),console.log("Allocations: ",t),console.log("Occupied: ",a),console.log("Equipment: ",n),console.log("Current allocation: ",o),console.log("Next allocation: ",i),setInterval(function(){console.log("Interval"),Q.dispatch(G.actions.setTime(Date.now()))},6e4)})(),l.a.render(i.a.createElement(r.a,{store:Q},i.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.69d890ae.chunk.js.map